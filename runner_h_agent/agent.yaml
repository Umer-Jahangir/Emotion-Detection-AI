agent:
  name: cross-platform-code-agent
  description: Executes code on GitHub runners and returns output + AI explanation.

  steps:
    - name: Upload Code
      action: upload-to-github
      with:
        repo: your-username/your-repo-name
        path: code/${{ input.filename }}
        content: ${{ input.code }}
        branch: main
        token: ${{ secrets.GITHUB_TOKEN }}

    - name: Trigger GitHub Workflow
      action: trigger-github-workflow
      with:
        repo: your-username/your-repo-name
        workflow: execute-code.yml
        ref: main
        inputs:
          filename: ${{ input.filename }}
          language: ${{ input.language }}
          os: ${{ input.os }}
        token: ${{ secrets.GITHUB_TOKEN }}

    - name: Wait for Results
      action: wait-for-artifact
      with:
        repo: your-username/your-repo-name
        artifact_name: result-${{ input.filename }}
        token: ${{ secrets.GITHUB_TOKEN }}

    - name: Respond to Client
      action: http-response
      with:
        status: 200
        json:
          filename: ${{ input.filename }}
          download_url: ${{ artifact.url }}
